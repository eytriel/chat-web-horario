<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Panel de Administraci칩n</title>
  <style>
    body { font-family: Arial; margin: 30px; }
    #messages { border: 1px solid #ccc; padding: 10px; height: 300px; overflow-y: scroll; }
  </style>
</head>
<body>
<h2>Panel de Administraci칩n</h2>

<div id="login">
  <input type="password" id="adminPass" placeholder="Contrase침a de admin" />
  <button onclick="adminLogin()">Entrar</button>
</div>

<div id="panel" style="display:none;">
  <h3>Mensajes en tiempo real</h3>
  <div id="messages"></div>
  <h3>Usuarios conectados</h3>
  <ul id="userList"></ul>
</div>

<script src="/socket.io/socket.io.js"></script>
<script>
  const socket = io();
  const ADMIN_PASSWORD = 'admin000'; // <- Puedes cambiar esto

  function adminLogin() {
    const input = document.getElementById('adminPass');
    const pass = input.value.trim();
    if (pass === ADMIN_PASSWORD) {
      document.getElementById('login').style.display = 'none';
      document.getElementById('panel').style.display = 'block';
    } else {
      alert("Contrase침a incorrecta.");
    }
  }

  socket.on('message', function(data) {
    const div = document.createElement('div');
    div.innerHTML = `<strong>${data.username}:</strong> ${data.message}`;
    document.getElementById('messages').appendChild(div);
    socket.on('user_list', function(users) {
      const ul = document.getElementById('userList');
      ul.innerHTML = '';
      users.forEach(user => {
        const li = document.createElement('li');
        li.textContent = user;
        ul.appendChild(li);
      });
    });
  });
</script>
</body>
</html>
